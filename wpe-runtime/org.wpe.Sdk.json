{
    "build-runtime": true,
    "id": "org.wpe.Sdk",
    "id-platform": "org.wpe.Platform",
    "branch": "0.1",
    "runtime": "org.freedesktop.BasePlatform",
    "sdk": "org.freedesktop.BaseSdk",
    "runtime-version": "1.4",
    "writable-sdk": true,
    "sdk-extensions": [],
    "metadata": "metadata.sdk",
    "metadata-platform": "metadata.platform",
    "cleanup": [ "/cache",
                 "/man",
                "*.la", "*.a" ],
    "cleanup-commands": [ ],
    "cleanup-platform": [ ],
    "build-options": {
        "cflags": "-O2 -g",
        "cxxflags": "-O2 -g"
    },
    "modules": [
        {
            "name": "xorg-x11-util-macros",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/util/util-macros-1.19.0.tar.bz2",
                    "sha256": "2835b11829ee634e19fa56517b4cfc52ef39acea0cd82e15f68096e27cbed0ba"
                }
            ]
        },
        {
            "name": "xorg-x11-proto-dri2",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/proto/dri2proto-2.8.tar.bz2",
                    "sha256": "f9b55476def44fc7c459b2537d17dbc731e36ed5d416af7ca0b1e2e676f8aa04"
                },
                {
                    "type": "shell",
                    "commands": [
                        "cp /usr/share/gnu-config/config.sub .",
                        "cp /usr/share/gnu-config/config.guess ."
                    ]
                }
            ]
        },
        {
            "name": "xorg-x11-proto-dri3",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/proto/dri3proto-1.0.tar.bz2",
                    "sha256": "01be49d70200518b9a6b297131f6cc71f4ea2de17436896af153226a774fc074"
                }
            ]
        },
        {
            "name": "xorg-x11-proto-gl",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/proto/glproto-1.4.17.tar.bz2",
                    "sha256": "adaa94bded310a2bfcbb9deb4d751d965fcfe6fb3a2f6d242e2df2d6589dbe40"
                }
            ]
        },
        {
            "name": "xorg-x11-proto-present",
            "cleanup-platform": [ "*" ],
            "sources": [
                 {
                     "type": "archive",
                     "url": "http://xorg.freedesktop.org/archive/individual/proto/presentproto-1.0.tar.bz2",
                     "sha256": "812c7d48721f909a0f7a2cb1e91f6eead76159a36c4712f4579ca587552839ce"
                 }
            ]
        },
        {
            "name": "xorg-x11-proto-x",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/proto/xproto-7.0.31.tar.bz2",
                    "sha256": "c6f9747da0bd3a95f86b17fb8dd5e717c8f3ab7f0ece3ba1b247899ec1ef7747"
                }
            ]
        },
        {
            "name": "libXau",
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/lib/libXau-1.0.8.tar.bz2",
                    "sha256": "fdd477320aeb5cdd67272838722d6b7d544887dfe7de46e1e7cc0c27c2bea4f2"
                }
            ]
        },
        {
            "name": "xcb-proto",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xcb.freedesktop.org/dist/xcb-proto-1.12.tar.bz2",
                    "sha256": "5922aba4c664ab7899a29d92ea91a87aa4c1fc7eb5ee550325c3216c480a4906"
                }
            ]
        },
        {
            "name": "libxcb",
            "rm-configure": true,
            "no-parallel-make": true,
            "config-opts": [ "--disable-static", "--enable-xkb", "--disable-xprint" ],
            "post-install": [ "sed 's,@libdir@,/usr/lib,;s,@prefix@,/usr,;s,@exec_prefix@,/usr,' pthread-stubs.pc.in > /usr/lib/pkgconfig/pthread-stubs.pc"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xcb.freedesktop.org/dist/libxcb-1.12.tar.bz2",
                    "sha256": "4adfb1b7c67e99bc9c2ccb110b2f175686576d2f792c8a71b9c8b19014057b5b"
                },
                {
                    "type": "file",
                    "path": "pthread-stubs.pc.in"
                },
                {
                    "type": "patch",
                    "path": "libxcb-pthread-stub.patch"
                }
            ]
        },
        {
            "name": "libpciaccess",
            "config-opts": [ "--disable-static" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/lib/libpciaccess-0.13.4.tar.bz2",
                    "sha256": "07f864654561e4ac8629a0ef9c8f07fbc1f8592d1b6c418431593e9ba2cf2fcf"
                }
            ]
        },
        {
            "name": "libdrm",
            "config-opts": [ "--disable-static", "--disable-udev" ],
            "sources": [
                {
                   "type": "archive",
                   "url": "https://dri.freedesktop.org/libdrm/libdrm-2.4.71.tar.gz",
                   "sha256": "c78804adc7f05bccb448188d7839c6769cf9f926dfde88603256942b1c4f6170"
                }
            ]
        },
        {
            "name": "libxshmfence",
            "config-opts": [ "--disable-static" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/lib/libxshmfence-1.2.tar.bz2",
                    "sha256": "d21b2d1fd78c1efbe1f2c16dae1cb23f8fd231dcf891465b8debe636a9054b0c"
                }
            ]
        },
        {
            "name": "wayland",
            "config-opts": ["--disable-static", "--disable-documentation"],
            "cleanup-platform": [ "/bin/wayland-scanner" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://wayland.freedesktop.org/releases/wayland-1.11.0.tar.xz",
                    "sha256": "9540925f7928becfdf5e3b84c70757f6589bf1ceef09bea78784d8e4772c0db0"
                }
            ]
        },
        {
            "name": "wayland-protocols",
            "cleanup-platform": [ "*" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://wayland.freedesktop.org/releases/wayland-protocols-1.7.tar.xz",
                    "sha256": "635f2a937d318f1fecb97b54074ca211486e38af943868dd0fa82ea38d091c1f"
                }
            ]
        },
        {
            "name": "mesa",
            "build-options" : {
                "cxxflags": "-O2 -g -fno-rtti -fno-exceptions"
            },
            "config-opts": [
                "--disable-selinux",
                "--disable-osmesa",
                "--with-gallium-drivers=",
                "--with-dri-drivers=i915,i965",
                "--with-dri-driverdir=/usr/lib/dri",
                "--enable-egl",
                "--disable-gles1",
                "--enable-gles2",
                "--disable-xvmc",
                "--with-egl-platforms=drm,wayland",
                "--enable-shared-glapi",
                "--enable-gbm",
                "--disable-opencl",
                "--enable-glx-tls",
                "--enable-texture-float=yes",
                "--enable-dri",
                "--disable-dri3",
                "--enable-sysfs",
                "--disable-glx",
                "--disable-xa"
            ],
            "make-args": [ "MKDEP=/bin/true"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://mesa.freedesktop.org/archive/12.0.5/mesa-12.0.5.tar.xz",
                    "sha256": "2b0a972d8282860a11291c09c3ef01ac45171405951eb21a83c45ed2b4321924"
                }
            ]
        },
        {
            "name": "glib2",
            "config-opts": ["--disable-gtk-doc",  "--with-pcre=system" ],
            "cleanup-platform": [ "/share/glib-2.0/codegen",
                                  "/bin/gdbus-codegen",
                                  "/bin/glib-*",
                                  "/bin/gobject-query",
                                  "/bin/gresource",
                                  "/bin/gtester*"
                                ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/glib/2.50/glib-2.50.2.tar.xz",
                    "sha256": "be68737c1f268c05493e503b3b654d2b7f43d7d0b8c5556f7e4651b870acfbf5"
                }
            ]
        },
        {
            "name": "freetype-bootstrap",
            "config-opts": [ "--disable-static", "--with-zlib=yes", "--with-bzip2=yes", "--with-png=yes", "--with-harfbuzz=no" ],
            "cleanup-platform": [ "/bin/freetype-config" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://downloads.sourceforge.net/project/freetype/freetype2/2.6.3/freetype-2.6.3.tar.bz2",
                    "sha256": "371e707aa522acf5b15ce93f11183c725b8ed1ee8546d7b3af549863045863a2"
                }
            ]
        },
        {
            "name": "fontconfig",
            "config-opts": [ "--disable-static"],
            "post-install": [ "install -m 0644 -p -T fontconfig-flatpak.conf /etc/fonts/conf.d/50-flatpak.conf"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://fontconfig.org/release/fontconfig-2.11.0.tar.bz2",
                    "sha256": "cb0e0ef6f03bc8568e95653840bb07d5859dc89d7ce2cade9d94fcccf8c1a467"
                },
                {
                    "type": "file",
                    "path": "fontconfig-flatpak.conf"
                }
            ]
        },
        {
            "name": "pixman",
            "config-opts": ["--disable-static"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://xorg.freedesktop.org/archive/individual/lib/pixman-0.34.0.tar.bz2",
                    "sha256": "39ba3438f3d17c464b0cb8be006dacbca0ab5aee97ebde69fec7ecdbf85794a0"
                }
            ]
        },
        {
            "name": "cairo",
            "config-opts": ["--disable-static",
                            "--enable-gobject",
                            "--enable-ft",
                            "--disable-script",
                            "--disable-ps",
                            "--disable-pdf",
                            "--disable-svg",
                            "--disable-gtk-doc"
                           ],
            "cleanup-platform": ["/bin"],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://cairographics.org/releases/cairo-1.14.6.tar.xz",
                    "sha256": "613cb38447b76a93ff7235e17acd55a78b52ea84a9df128c3f2257f8eaa7b252"
                }
            ]
        },
        {
            "name": "graphite2",
            "cmake": true,
            "config-opts": [
                "-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
                "-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
                "-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON",
                "-DCMAKE_INSTALL_PREFIX:PATH=/usr",
                "-DINCLUDE_INSTALL_DIR:PATH=/usr/include",
                "-DLIB_INSTALL_DIR:PATH=/usr/lib",
                "-DSYSCONF_INSTALL_DIR:PATH=/etc",
                "-DSHARE_INSTALL_PREFIX:PATH=/usr/share",
                "-DBUILD_SHARED_LIBS:BOOL=ON",
                "-DGRAPHITE2_COMPARE_RENDERER=OFF"
            ],
            "sources": [
                 {
                     "type": "archive",
                     "url": "http://downloads.sourceforge.net/project/silgraphite/graphite2/graphite2-1.3.8.tgz",
                     "sha256": "9f3f25b3a8495ce0782e77f69075c0dd9b7c054847b9bf9ff130bec38f4c8cc2"
                 }
            ]
        },
        {
            "name": "harfbuzz",
            "config-opts": ["--disable-static",
                            "--disable-gtk-doc",
                            "--with-gobject",
                            "--with-graphite2"
                           ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://www.freedesktop.org/software/harfbuzz/release/harfbuzz-1.2.7.tar.bz2",
                    "sha256": "bba0600ae08b84384e6d2d7175bea10b5fc246c4583dc841498d01894d479026"
                }
            ]
        },
        {
            "name": "freetype",
            "config-opts": [ "--disable-static", "--with-zlib=yes", "--with-bzip2=yes", "--with-png=yes", "--with-harfbuzz=yes" ],
            "cleanup-platform": [ "/bin/freetype-config" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://downloads.sourceforge.net/project/freetype/freetype2/2.6.3/freetype-2.6.3.tar.bz2",
                    "sha256": "371e707aa522acf5b15ce93f11183c725b8ed1ee8546d7b3af549863045863a2"
                }
            ]
        },
        {
            "name": "libproxy",
            "cmake": true,
            "config-opts": [
                "-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
                "-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
                "-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON",
                "-DCMAKE_INSTALL_PREFIX:PATH=/usr",
                "-DINCLUDE_INSTALL_DIR:PATH=/usr/include",
                "-DLIB_INSTALL_DIR:PATH=/usr/lib",
                "-DSYSCONF_INSTALL_DIR:PATH=/etc",
                "-DSHARE_INSTALL_PREFIX:PATH=/usr/share",
                "-DBUILD_SHARED_LIBS:BOOL=ON",
                "-DMODULE_INSTALL_DIR=/usr/lib/libproxy/0.4.11/modules",
                "-DWITH_PERL=OFF",
                "-DWITH_GNOME3=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/libproxy/libproxy/archive/0.4.13.tar.gz",
                    "sha256": "d610bc0ef81a18ba418d759c5f4f87bf7102229a9153fb397d7d490987330ffd"
                }
            ]
        },
        {
            "name": "glib-networking",
            "config-opts": ["--disable-static", "--with-libproxy"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/glib-networking/2.50/glib-networking-2.50.0.tar.xz",
                    "sha256": "3f1a442f3c2a734946983532ce59ed49120319fdb10c938447c373d5e5286bee"
                }
            ]
        },
        {
            "name": "libsoup",
            "config-opts": [ "--disable-static", "--disable-vala", "--disable-gtk-doc" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/libsoup/2.56/libsoup-2.56.0.tar.xz",
                    "sha256": "d8216b71de8247bc6f274ec054c08547b2e04369c1f8add713e9350c8ef81fe5"
                }
            ]
        },
        {
            "name": "libwpe",
            "cmake": true,
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_INSTALL_PREFIX=/usr"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/WebKitForWayland/wpe/archive/b5b94f54f2e96a56b254dab33f9f49c3a3be9403.tar.gz",
                    "sha256": "a53e027b8b14006fdc48621c46937a0aa672b373727abfad5f61955bd68a6f35"
                }
            ]
        },
        {
            "name": "xkeyboard-config",
            "config-opts": [ "--enable-compat-rules", "--with-xkb-base=/usr/share/X11/xkb", "--with-xkb-rules-symlink=xorg", "--disable-runtime-deps"],
            "sources": [
                 {
                     "type": "archive",
                     "url": "http://xorg.freedesktop.org/archive/individual/data/xkeyboard-config/xkeyboard-config-2.18.tar.bz2",
                     "sha256": "c41d917d6c8a59feb7ccbda51c40a6ada824fdd1e9684b52dd48c9530617ddd0"
                 }
            ]
        },
        {
            "name": "libxkbcommon",
            "config-opts": [ "--disable-static", "--enable-x11" ],
            "sources": [
                 {
                     "type": "archive",
                     "url": "http://xkbcommon.org/download/libxkbcommon-0.6.1.tar.xz",
                     "sha256": "5b0887b080b42169096a61106661f8d35bae783f8b6c58f97ebcd3af83ea8760"
                 }
            ]
        },
        {
            "name": "libwpe-mesa",
            "cmake": true,
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_INSTALL_PREFIX=/usr"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/WebKitForWayland/wpe-mesa/archive/0b92467c50f3c3456c0b8cac777301fd69243a05.tar.gz",
                    "sha256": "e8fe737fa3b7f6451ff4575c42fc10424d5d6409712451ca40f61ef41cad42ec"
                }
            ]
        },

        {
            "name": "orc",
            "config-opts": ["--disable-static",
                            "--disable-gtk-doc"],
            "cleanup-platform": [ "/bin" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://gstreamer.freedesktop.org/src/orc/orc-0.4.26.tar.xz",
                    "sha256": "7d52fa80ef84988359c3434e1eea302d077a08987abdde6905678ebcad4fa649"
                }
            ]
        },
        {
            "name": "gstreamer",
            "config-opts": ["--disable-gtk-doc", "--enable-debug", "--disable-examples" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gstreamer.freedesktop.org/src/gstreamer/gstreamer-1.10.2.tar.xz",
                    "sha256": "150e8e81febac94c161d8141cde78a38038a8f56e8ec549f353da54994278d65"
                }
            ]
        },
        {
            "name": "gstreamer-plugins-base",
            "config-opts": ["--disable-gtk-doc", "--enable-experimental", "--enable-orc" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://gstreamer.freedesktop.org/src/gst-plugins-base/gst-plugins-base-1.10.2.tar.xz",
                    "sha256": "fbc0d40fcb746d2efe2ea47444674029912f66e6107f232766d33b722b97de20"
                }
            ]
        },
        {
            "name": "gstreamer-plugins-good",
            "config-opts": ["--disable-gtk-doc",
                            "--enable-experimental",
                            "--enable-orc" ,
                            "--disable-monoscope",
                            "--disable-aalib",
                            "--enable-cairo",
                            "--disable-libcaca",
                            "--disable-jack",
                            "--with-default-visualizer=autoaudiosink" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://gstreamer.freedesktop.org/src/gst-plugins-good/gst-plugins-good-1.10.2.tar.xz",
                    "sha256": "198f325bcce982dce1ebeb36929a5f430b8bf9528e0d519e18df0b29e1d23313"
                }
            ]
        },
        {
            "name": "gstreamer-plugins-bad",
            "config-opts": ["--disable-gtk-doc", "--enable-experimental", "--enable-orc" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-1.10.2.tar.xz",
                    "sha256": "0795ca9303a99cc7e44dda0e6e18524de02b39892e4b68eaba488f7b9db53a3a"
                }
            ]
        },
        {
            "name": "wpe-webkit",
            "cmake": true,
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=Release",
                "-DCMAKE_C_FLAGS_RELEASE=-O2 -DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_CXX_FLAGS_RELEASE=-O2 -DNDEBUG -DMESA_EGL_NO_X11_HEADERS",
                "-DCMAKE_INSTALL_PREFIX=/usr",
                "-DPORT=WPE"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/WebKitForWayland/webkit/archive/bcd8d8c9ee6bca926f87eb3e8378e3b2d98dda1b.tar.gz",
                    "sha256": "63ebac89fef8bcbb810d0162426f6b65d187cb87b755ecac52376080ceaae99f"
                }
            ]
        }
    ]
}
